{"version":3,"sources":["./src/app/explore-container/explore-container.component.ts","./src/app/explore-container/explore-container.component.html","./src/app/explore-container/explore-container.module.ts","./src/app/services/photo.service.ts"],"names":[],"mappings":"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","file":"default~tab2-tab2-module~tab3-tab3-module-es2015.js","sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-explore-container',\n  templateUrl: './explore-container.component.html',\n  styleUrls: ['./explore-container.component.scss'],\n})\nexport class ExploreContainerComponent implements OnInit {\n  @Input() name: string;\n  \n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<div id=\"container\">\n  <strong>{{ name }}</strong>\n  <p>Explore <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://ionicframework.com/docs/components\">UI Components</a></p>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ExploreContainerComponent } from './explore-container.component';\n\n@NgModule({\n  imports: [ CommonModule, FormsModule,IonicModule,],\n  declarations: [ExploreContainerComponent],\n  exports: [ExploreContainerComponent]\n})\nexport class ExploreContainerComponentModule {}\n","import { Injectable } from '@angular/core';\r\nimport { Plugins, CameraResultType, Capacitor, FilesystemDirectory, CameraPhoto, CameraSource } from '@capacitor/core';\r\nimport { Platform } from '@ionic/angular';\r\n\r\nconst { Camera, Filesystem, Storage } = Plugins;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PhotoService {\r\n  public photos: Photo[] = [];\r\n  private PHOTO_STORAGE: string = \"photos\";\r\n  private platform: Platform;\r\n\r\n  constructor(platform: Platform) {\r\n    this.platform = platform;\r\n   }\r\n\r\n  public async loadSaved() {\r\n    // Retrieve cached photo array data\r\n    const photoList = await Storage.get({ key: this.PHOTO_STORAGE });\r\n    this.photos = JSON.parse(photoList.value) || [];\r\n\r\n    // If running on the web...\r\n    if (!this.platform.is('hybrid')) {\r\n      // Display the photo by reading into base64 format\r\n      for (let photo of this.photos) {\r\n        // Read each saved photo's data from the Filesystem\r\n        const readFile = await Filesystem.readFile({\r\n            path: photo.filepath,\r\n            directory: FilesystemDirectory.Data\r\n        });\r\n      \r\n        // Web platform only: Load the photo as base64 data\r\n        photo.webviewPath = `data:image/jpeg;base64,${readFile.data}`;\r\n      }\r\n    }\r\n  }\r\n\r\n  /* Use the device camera to take a photo:\r\n  // https://capacitor.ionicframework.com/docs/apis/camera\r\n  \r\n  // Store the photo data into permanent file storage:\r\n  // https://capacitor.ionicframework.com/docs/apis/filesystem\r\n  \r\n  // Store a reference to all photo filepaths using Storage API:\r\n  // https://capacitor.ionicframework.com/docs/apis/storage\r\n  */\r\n  public async addNewToGallery() {\r\n    // Take a photo\r\n    const capturedPhoto = await Camera.getPhoto({\r\n      resultType: CameraResultType.Uri, // file-based data; provides best performance\r\n      source: CameraSource.Camera, // automatically take a new photo with the camera\r\n      quality: 100 // highest quality (0 to 100)\r\n    });\r\n    \r\n    const savedImageFile = await this.savePicture(capturedPhoto);\r\n\r\n    // Add new photo to Photos array\r\n    this.photos.unshift(savedImageFile);\r\n\r\n    // Cache all photo data for future retrieval\r\n    Storage.set({\r\n      key: this.PHOTO_STORAGE,\r\n      value: JSON.stringify(this.photos)\r\n    });\r\n  }\r\n\r\n  async addNewFromGallery() {\r\n    // Take a photo\r\n    const capturedPhoto = await Camera.getPhoto({\r\n      resultType: CameraResultType.Uri, // file-based data; provides best performance\r\n      source: CameraSource.Photos, // image from gallery\r\n      quality: 100 // highest quality (0 to 100)\r\n    });\r\n    \r\n    const savedImageFile = await this.savePicture(capturedPhoto);\r\n\r\n    // Add new photo to Photos array\r\n    this.photos.unshift(savedImageFile);\r\n\r\n    // Cache all photo data for future retrieval\r\n    Storage.set({\r\n      key: this.PHOTO_STORAGE,\r\n      value: JSON.stringify(this.photos)\r\n    });\r\n \r\n  }\r\n\r\n  // Save picture to file on device\r\n  private async savePicture(cameraPhoto: CameraPhoto) {\r\n    // Convert photo to base64 format, required by Filesystem API to save\r\n    const base64Data = await this.readAsBase64(cameraPhoto);\r\n\r\n    // Write the file to the data directory\r\n    const fileName = new Date().getTime() + '.jpeg';\r\n    const savedFile = await Filesystem.writeFile({\r\n      path: fileName,\r\n      data: base64Data,\r\n      directory: FilesystemDirectory.Data\r\n    });\r\n\r\n    if (this.platform.is('hybrid')) {\r\n      // Display the new image by rewriting the 'file://' path to HTTP\r\n      // Details: https://ionicframework.com/docs/building/webview#file-protocol\r\n      return {\r\n        filepath: savedFile.uri,\r\n        webviewPath: Capacitor.convertFileSrc(savedFile.uri),\r\n      };\r\n    }\r\n    else {\r\n      // Use webPath to display the new image instead of base64 since it's \r\n      // already loaded into memory\r\n      return {\r\n        filepath: fileName,\r\n        webviewPath: cameraPhoto.webPath\r\n      };\r\n    }\r\n  }\r\n\r\n  // Read camera photo into base64 format based on the platform the app is running on\r\n  private async readAsBase64(cameraPhoto: CameraPhoto) {\r\n    // \"hybrid\" will detect Cordova or Capacitor\r\n    if (this.platform.is('hybrid')) {\r\n      // Read the file into base64 format\r\n      const file = await Filesystem.readFile({\r\n        path: cameraPhoto.path\r\n      });\r\n\r\n      return file.data;\r\n    }\r\n    else {\r\n      // Fetch the photo, read as a blob, then convert to base64 format\r\n      const response = await fetch(cameraPhoto.webPath!);\r\n      const blob = await response.blob();\r\n\r\n      return await this.convertBlobToBase64(blob) as string;  \r\n    }\r\n  }\r\n\r\n  // Delete picture by removing it from reference data and the filesystem\r\n  public async deletePicture(photo: Photo, position: number) {\r\n    // Remove this photo from the Photos reference data array\r\n    this.photos.splice(position, 1);\r\n\r\n    // Update photos array cache by overwriting the existing photo array\r\n    Storage.set({\r\n      key: this.PHOTO_STORAGE,\r\n      value: JSON.stringify(this.photos)\r\n    });\r\n\r\n    // delete photo file from filesystem\r\n    const filename = photo.filepath.substr(photo.filepath.lastIndexOf('/') + 1);\r\n    await Filesystem.deleteFile({\r\n      path: filename,\r\n      directory: FilesystemDirectory.Data\r\n    });\r\n  }\r\n\r\n  convertBlobToBase64 = (blob: Blob) => new Promise((resolve, reject) => {\r\n    const reader = new FileReader;\r\n    reader.onerror = reject;\r\n    reader.onload = () => {\r\n        resolve(reader.result);\r\n    };\r\n    reader.readAsDataURL(blob);\r\n  });\r\n\r\n  public async deleteAllPicture() {\r\n    // Retrieve cached photo array data\r\n    const photoList = await Storage.get({ key: this.PHOTO_STORAGE });\r\n    this.photos = JSON.parse(photoList.value) || [];\r\n\r\n    // If running on the web...\r\n    if (!this.platform.is('hybrid')) {\r\n      // Display the photo by reading into base64 format\r\n      for (let photo of this.photos) {\r\n        // delete photo file from filesystem\r\n        await Filesystem.deleteFile({\r\n            path: photo.filepath,\r\n            directory: FilesystemDirectory.Data\r\n        });\r\n      }\r\n    }\r\n    Storage.clear();\r\n    // Storage.set({\r\n    //   key: this.PHOTO_STORAGE,\r\n    //   value: \"\"\r\n    // });\r\n  }\r\n}\r\n\r\nexport interface Photo {\r\n  filepath: string;\r\n  webviewPath: string;\r\n}\r\n"],"sourceRoot":"webpack:///"}